<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- common.css -->
  <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: Arial, Helvetica, sans-serif;margin: 0;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre {margin: 0;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
  <!-- ace-static.css -->
  <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
  <style>.ace-tomorrow-night-eighties .ace_gutter {background: #272727;color: #CCC}.ace-tomorrow-night-eighties .ace_print-margin {width: 1px;background: #272727}.ace-tomorrow-night-eighties {background-color: #2D2D2D;color: #CCCCCC}.ace-tomorrow-night-eighties .ace_constant.ace_other,.ace-tomorrow-night-eighties .ace_cursor {color: #CCCCCC}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selection {background: #515151}.ace-tomorrow-night-eighties.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #2D2D2D;border-radius: 2px}.ace-tomorrow-night-eighties .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-tomorrow-night-eighties .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #6A6A6A}.ace-tomorrow-night-bright .ace_stack {background: rgb(66, 90, 44)}.ace-tomorrow-night-eighties .ace_marker-layer .ace_active-line {background: #393939}.ace-tomorrow-night-eighties .ace_gutter-active-line {background-color: #393939}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selected-word {border: 1px solid #515151}.ace-tomorrow-night-eighties .ace_invisible {color: #6A6A6A}.ace-tomorrow-night-eighties .ace_keyword,.ace-tomorrow-night-eighties .ace_meta,.ace-tomorrow-night-eighties .ace_storage,.ace-tomorrow-night-eighties .ace_storage.ace_type,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #CC99CC}.ace-tomorrow-night-eighties .ace_keyword.ace_operator {color: #66CCCC}.ace-tomorrow-night-eighties .ace_constant.ace_character,.ace-tomorrow-night-eighties .ace_constant.ace_language,.ace-tomorrow-night-eighties .ace_constant.ace_numeric,.ace-tomorrow-night-eighties .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night-eighties .ace_support.ace_constant,.ace-tomorrow-night-eighties .ace_variable.ace_parameter {color: #F99157}.ace-tomorrow-night-eighties .ace_invalid {color: #CDCDCD;background-color: #F2777A}.ace-tomorrow-night-eighties .ace_invalid.ace_deprecated {color: #CDCDCD;background-color: #CC99CC}.ace-tomorrow-night-eighties .ace_fold {background-color: #6699CC;border-color: #CCCCCC}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_function,.ace-tomorrow-night-eighties .ace_support.ace_function,.ace-tomorrow-night-eighties .ace_variable {color: #6699CC}.ace-tomorrow-night-eighties .ace_support.ace_class,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #FFCC66}.ace-tomorrow-night-eighties .ace_heading,.ace-tomorrow-night-eighties .ace_markup.ace_heading,.ace-tomorrow-night-eighties .ace_string {color: #99CC99}.ace-tomorrow-night-eighties .ace_comment {color: #999999}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_tag,.ace-tomorrow-night-eighties .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night-eighties .ace_meta.ace_tag,.ace-tomorrow-night-eighties .ace_variable {color: #F2777A}.ace-tomorrow-night-eighties .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y}</style>
  <!-- export.css -->
  <style>
    body{margin:0 auto;max-width:800px;line-height:1.4}
    #nav{margin:5px 0 10px;font-size:15px}
    #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
    #contentarea{font-size:15px;margin:16px 0}
    .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
    .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
    .latex-cell{white-space:pre-wrap;}
  </style>
  <!-- User CSS -->
  <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
</head>
<body>
  <div id="nav"><div>Next: <a href='Untitled Note.html'>Untitled Note</a>, Previous: <a href='FFMpeg.html'>FFMpeg</a>, Up: <a href='index.html'>Index</a></div></div>
  <div id="titlearea">
    <h2>iOS设计模式-单例</h2>
  </div>
  <div id="contentarea"><div class="cell text-cell">目录<div><ul><li><span style="color: rgb(221, 221, 221);">单例模式</span><br></li><li><span style="color: rgb(221, 221, 221);">编写严格的单例</span><br></li><li><span style="color: rgb(221, 221, 221);">优化本地存储</span><br></li></ul></div><div><br></div><h2>单例模式</h2><div><br></div><div>定义:单例是<span style="color: rgb(221, 221, 221);">系统中的一个类只有一个实例且利于外界访问.</span></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><ul><li>单例模式的基本原理<br></li><li>单例模式用以解决什么问题?<br></li><li>单例模式的优缺点<br></li></ul></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">我们在系统中经常用到的单例模式</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures; color: #707070">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures; color: rgb(112, 112, 112);">比例</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">利用</span><span style="font-variant-ligatures: no-common-ligatures">sharedApplication</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">获取</span><span style="font-variant-ligatures: no-common-ligatures">UIApplication</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的实例并获取状态栏的风格</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(29, 141, 164);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">[[</span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">UIApplication</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">sharedApplication</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">] </span><span style="font-variant-ligatures: no-common-ligatures">statusBarStyle</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;&nbsp; &nbsp;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;&nbsp; &nbsp;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">利用</span><span style="font-variant-ligatures: no-common-ligatures">defaultCenter</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">获取</span><span style="font-variant-ligatures: no-common-ligatures">NSNotificationCenter</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">通知中心的实例并添加通知对象</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">[[NSNotificationCenter defaultCenter] addObserver:&lt;#(nonnull id)#&gt; selector:&lt;#(nonnull SEL)#&gt; name:&lt;#(nullable NSString *)#&gt; object:&lt;#(nullable id)#&gt;];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;&nbsp; &nbsp;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">利用</span><span style="font-variant-ligatures: no-common-ligatures">standardUserDefaults</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">获取</span><span style="font-variant-ligatures: no-common-ligatures">NSUserDefaults</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的实例并设置属性参数</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">[[NSUserDefaults standardUserDefaults] setObject:&lt;#(nullable id)#&gt; forKey:&lt;#(nonnull NSString *)#&gt;]</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;&nbsp; &nbsp;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">利用</span><span style="font-variant-ligatures: no-common-ligatures">defaultManager</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">获取</span><span style="font-variant-ligatures: no-common-ligatures">NSFileManager</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">实例</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(29, 141, 164);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">[</span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSFileManager</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">defaultManager</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp;&nbsp;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-family: Arial, Helvetica, sans-serif;"><br></span></p><h3><span style="font-family: Arial, Helvetica, sans-serif;">单例模式的基本原理:</span></h3>
<p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">通过以上这一些方法可以知道</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">单例的类都会通过一个类方法来获取到一个唯一的实例</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">然后能过实例来作相关的操作</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures"></span><br></p><h3><span style="font-family: Arial, Helvetica, sans-serif;">单例模式用以解决什么问题?:</span></h3><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">从</span><span style="font-variant-ligatures: no-common-ligatures">sharedApplication/defaultCenter/standardUserDefaults/defaultManager</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">可以观察到</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">单例模式一般都是用来管理一个独有的对象</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">而这个对象拥有某些资源</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">而这些资源</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);">




</p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">是可以全局共享的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><br></p></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><h3><span style="color: rgb(221, 221, 221);">单例的优点:</span></h3><div><span style="color: rgb(221, 221, 221);">可以全局共享信息,一般用作管理中心.</span></div><h3><span style="color: rgb(221, 221, 221);">单例的</span><font color="#cccccc">缺点</font></h3><div><font color="#cccccc">就是因为共享了信息而破坏了设计模式中的最少支持原则.因为单全模式不管在系统什么地方都可以访问.</font></div><div><font color="#cccccc">就是因为可以全局访问,所以产生了偶合,但是在我们平常的开发当中是可以忽略掉的.</font></div><div><font color="#cccccc"><br></font></div><div><font color="#cccccc"><br></font></div><h2><font color="#cccccc">单例的声明</font></h2><div><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">方法一</span><span style="font-variant-ligatures: no-common-ligatures">:</span></p>
<p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">这是非常常规的作法</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">有时候</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">AppDelegate</span><span style="font-variant-ligatures: no-common-ligatures">也在访问这个函数</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">其他</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">ViewController</span><span style="font-variant-ligatures: no-common-ligatures">也在访问这个函数</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p>
<p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">有可能一瞬时</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">这个函数的逻辑会被不同的类调用多次</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span><span style="font-variant-ligatures: no-common-ligatures">所以我们可以使用方法二</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p></div><div><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">+ (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">instancetype</span><span style="font-variant-ligatures: no-common-ligatures">)managerCenter {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures"> (!center) {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; center = [[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; }</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> center;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">方法二</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">使用</span><span style="font-variant-ligatures: no-common-ligatures">dispatch_once_t</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">可以解决方法一遇到的问题</span><span style="font-variant-ligatures: no-common-ligatures">.</span></p></div><div><span style="font-family: Menlo; font-variant-ligatures: no-common-ligatures;">+ (</span><span style="color: rgb(224, 59, 75); font-family: Menlo; font-variant-ligatures: no-common-ligatures;">instancetype</span><span style="font-family: Menlo; font-variant-ligatures: no-common-ligatures;">)managerCenter {</span></div>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #6c6fc6">dispatch_once_t</span><span style="font-variant-ligatures: no-common-ligatures"> onceToken;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #d84969">dispatch_once</span><span style="font-variant-ligatures: no-common-ligatures">(&amp;onceToken, ^{</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; center = [[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; });</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> center;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><span style="color: rgb(221, 221, 221);"><br></span></div><div><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">方法三</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">使用</span><span style="font-variant-ligatures: no-common-ligatures">initalize</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">方法来创建单例</span><span style="font-variant-ligatures: no-common-ligatures">.</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">因为这个方法在哪一个类在调用任意方法的时候</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">都会提前调用这个</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">initalize</span><span style="font-variant-ligatures: no-common-ligatures">方法</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">但是我还是推使用方法二</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">GCD</span><span style="font-variant-ligatures: no-common-ligatures">中的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">dispatch_once_t</span><span style="font-variant-ligatures: no-common-ligatures">来创建创建单例</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span><span style="font-variant-ligatures: no-common-ligatures">因为</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">GCD</span><span style="font-variant-ligatures: no-common-ligatures">是</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">Apple</span><span style="font-variant-ligatures: no-common-ligatures">公司为了解决多核优化</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">


</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">专门推出的一门技术</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">+ (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">void</span><span style="font-variant-ligatures: no-common-ligatures">)initialize {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> == [</span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">class</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">]) {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; center = [[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; }</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><h2><span style="font-variant-ligatures: no-common-ligatures">如何创建一个严格的单例模式</span></h2></div><h3>防止单例类被子类化</h3><div>我们可以用一种防止子类化操作的手段来验证当前的这个类只可以是<span style="font-family: Menlo;">UserInfoManagerCenter这个类来调用,</span></div><div><font color="#cccccc" face="Menlo">如果是其他类来调用这个方法的话直接另程序c</font><span style="font-family: Hei;">rash</span><span style="font-family: Menlo;">崩溃.</span></div><div><div style="color: rgb(221, 221, 221);"><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">+ (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">instancetype</span><span style="font-variant-ligatures: no-common-ligatures">)managerCenter {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #6c6fc6">dispatch_once_t</span><span style="font-variant-ligatures: no-common-ligatures"> onceToken;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #d84969">dispatch_once</span><span style="font-variant-ligatures: no-common-ligatures">(&amp;onceToken, ^{</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; center = [[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; });</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures"></span>&nbsp; &nbsp; //防止子类化操作</p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSString</span><span style="font-variant-ligatures: no-common-ligatures"> *classString = </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSStringFromClass</span><span style="font-variant-ligatures: no-common-ligatures">([</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">class</span><span style="font-variant-ligatures: no-common-ligatures">]);</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures"> ([classString </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">isEqualToString</span><span style="font-variant-ligatures: no-common-ligatures">:</span><span style="font-variant-ligatures: no-common-ligatures; color: #9c8a61">@"UserInfoManagerCenter"</span><span style="font-variant-ligatures: no-common-ligatures">] == </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">NO</span><span style="font-variant-ligatures: no-common-ligatures">) {</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSLog</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures">@"&lt;%@&gt;</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的父类不可以于被继承</span><span style="font-variant-ligatures: no-common-ligatures">,</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">请不要作继承等子类化操作</span><span style="font-variant-ligatures: no-common-ligatures">"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">,classString);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; //有关更多</span>NSParameterAssert的使用请右转.</p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(216, 73, 105);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures">NSParameterAssert</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">);</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; }</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> center;</span></p>
<p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><h3><span style="font-variant-ligatures: no-common-ligatures">如何确保实例对象只出现一个?</span></h3><div>由以下两种方式来创建对象可以在NSLog中得出这两个分别不同的对象.但是我们需要单例模式是全局只能有唯一一个</div><div>对象.</div><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSLog</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures; color: #9c8a61">@"%@"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">,[</span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #62989c">managerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">]);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">
</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSLog</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures; color: #9c8a61">@"%@"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">,[[</span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">]);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><span style="font-variant-ligatures: no-common-ligatures"><b>2016-06-08 01:55:00.684 DesignPattern-Singleton Pattern[68661:685586] &lt;UserInfoManagerCenter: 0x7f9678710860&gt;</b></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">
</span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><span style="font-variant-ligatures: no-common-ligatures"><b>2016-06-08 01:55:00.685 DesignPattern-Singleton Pattern[68661:685586] &lt;UserInfoManagerCenter: 0x7f9678528650&gt;</b></span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><span style="font-variant-ligatures: no-common-ligatures"><b><br></b></span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><span style="font-variant-ligatures: no-common-ligatures"><b><br></b></span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b>虽然我们从上面这两个方法可以看出这样创建对象对系统来说开销并不大,但是在我们日常的开发中,一个单例类作为管理中心的话,它对系统的开销是非常</b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b>大的.实例化出个单例的实例对象常常会消耗非常多的资源,一般而然是只允许实例化出一个实例对象,而以上这种情形是出现了两相同的实例对象.</b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b>虽然说,这样创建出的实例化对象从里面获取出来的值是能用的,但是这样不适合我们单例模式中的要求.</b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b>所以我们可以使用一些技巧来阻止调用init方法,如果是通过init方法创建来出的实例对象是无效的.</b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b><br></b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b><br></b></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//1.</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">首先将</span><span style="font-variant-ligatures: no-common-ligatures">static</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">放到外面去</span><span style="font-variant-ligatures: no-common-ligatures">.</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//2.</span><span style="font-variant-ligatures: no-common-ligatures">创建单例实例方法</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">+ (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">instancetype</span><span style="font-variant-ligatures: no-common-ligatures">)managerCenter {</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(227, 180, 59);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *center = </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">static</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #6c6fc6">dispatch_once_t</span><span style="font-variant-ligatures: no-common-ligatures"> onceToken;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #d84969">dispatch_once</span><span style="font-variant-ligatures: no-common-ligatures">(&amp;onceToken, ^{</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures">//1).</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">我们先让这个</span><span style="font-variant-ligatures: no-common-ligatures">center</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">等于一个字符串</span><span style="font-variant-ligatures: no-common-ligatures">,</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">然后强制转换成</span><span style="font-variant-ligatures: no-common-ligatures">UserInfoManagerCenter</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的指针</span><span style="font-variant-ligatures: no-common-ligatures">;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; center = (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> *)</span><span style="font-variant-ligatures: no-common-ligatures">@"UserInfoManagerCenter”</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">;</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">&nbsp; &nbsp; &nbsp; &nbsp; //</span><span style="font-variant-ligatures: no-common-ligatures">这里会调用我们重写的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">init</span><span style="font-variant-ligatures: no-common-ligatures">方法</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">
</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; center = [[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e3b43b">UserInfoManagerCenter</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">alloc</span><span style="font-variant-ligatures: no-common-ligatures">] </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; });</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures"></span><br></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSString</span><span style="font-variant-ligatures: no-common-ligatures"> *classString = </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSStringFromClass</span><span style="font-variant-ligatures: no-common-ligatures">([</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">class</span><span style="font-variant-ligatures: no-common-ligatures">]);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures"> ([classString </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">isEqualToString</span><span style="font-variant-ligatures: no-common-ligatures">:</span><span style="font-variant-ligatures: no-common-ligatures; color: #9c8a61">@"UserInfoManagerCenter"</span><span style="font-variant-ligatures: no-common-ligatures">] == </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">NO</span><span style="font-variant-ligatures: no-common-ligatures">) {</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSLog</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures">@"%@</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的父类不可以于被继承</span><span style="font-variant-ligatures: no-common-ligatures">,</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">请不要作继承等子类化操作</span><span style="font-variant-ligatures: no-common-ligatures">"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">,classString);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(216, 73, 105);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures">NSParameterAssert</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; }</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> center;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures"></span><br></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">//3.</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">重写</span><span style="font-variant-ligatures: no-common-ligatures">init</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">方法</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">/**</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">&nbsp;</span><span style="font-variant-ligatures: no-common-ligatures">也就是说我们只充通过</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">managerCenter</span><span style="font-variant-ligatures: no-common-ligatures">方法创建实例对象</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">如果是通过</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">alloc init</span><span style="font-variant-ligatures: no-common-ligatures">方法来创建实例对象</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">我们返回是空的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">&nbsp;</span><span style="font-variant-ligatures: no-common-ligatures">或直接让程序</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">crash</span><span style="font-variant-ligatures: no-common-ligatures">崩溃</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;*/</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(224, 59, 75);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">- (</span><span style="font-variant-ligatures: no-common-ligatures">instancetype</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">)init {</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(112, 112, 112);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures">//2).</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">我们在</span><span style="font-variant-ligatures: no-common-ligatures">init</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">创始化的时候进行强制类型转换</span><span style="font-variant-ligatures: no-common-ligatures">,</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">让</span><span style="font-variant-ligatures: no-common-ligatures">string</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">的指针指向这个</span><span style="font-variant-ligatures: no-common-ligatures">center;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSString</span><span style="font-variant-ligatures: no-common-ligatures"> *string = (</span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSString</span><span style="font-variant-ligatures: no-common-ligatures"> *)</span><span style="font-variant-ligatures: no-common-ligatures; color: #3eb78a">center</span><span style="font-variant-ligatures: no-common-ligatures">;</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures; color: rgb(205, 187, 149);">&nbsp; &nbsp; </span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//3).</span><span style="font-variant-ligatures: no-common-ligatures">接着先判断一下</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">string</span><span style="font-variant-ligatures: no-common-ligatures">是不是字符串类型的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">,</span><span style="font-variant-ligatures: no-common-ligatures">如果是再判断这个字符是不是我们给定的这个字符串</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures"> ([string </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">isKindOfClass</span><span style="font-variant-ligatures: no-common-ligatures">:[</span><span style="font-variant-ligatures: no-common-ligatures; color: #cf6354">NSString</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">class</span><span style="font-variant-ligatures: no-common-ligatures">]] == </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">YES</span><span style="font-variant-ligatures: no-common-ligatures"> &amp;&amp;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; [string </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">isEqualToString</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">:</span><span style="font-variant-ligatures: no-common-ligatures">@"UserInfoManagerCenter"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">]) {</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures; color: rgb(205, 187, 149);">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">如果这些条件满足了我就就进行</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">init</span><span style="font-variant-ligatures: no-common-ligatures">的创建化</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures"> = [</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">super</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">init</span><span style="font-variant-ligatures: no-common-ligatures">];</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">if</span><span style="font-variant-ligatures: no-common-ligatures"> (</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures">) {</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149); min-height: 15px;"><span style="font-variant-ligatures: no-common-ligatures">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures">;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; } </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">else</span><span style="font-variant-ligatures: no-common-ligatures"> {</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures; color: rgb(205, 187, 149);">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">如果不满足这些条件的话我们就返回空或直接让程序</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">crash</span><span style="font-variant-ligatures: no-common-ligatures">崩溃</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: 'PingFang SC'; color: rgb(112, 112, 112);"><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures; color: rgb(205, 187, 149);">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">//</span><span style="font-variant-ligatures: no-common-ligatures">也就是说我们用常规的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">alloc init</span><span style="font-variant-ligatures: no-common-ligatures">方法是话是绝对创建不出来的</span><span style="line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">.</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(156, 138, 97);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">NSLog</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures">@"&lt;%@&gt;</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">不能使用</span><span style="font-variant-ligatures: no-common-ligatures">alloc init</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">方法创建</span><span style="font-variant-ligatures: no-common-ligatures">,</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">请使用</span><span style="font-variant-ligatures: no-common-ligatures">managerCenter</span><span style="line-height: normal; font-family: 'PingFang SC'; font-variant-ligatures: no-common-ligatures;">创建实例对象</span><span style="font-variant-ligatures: no-common-ligatures">"</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">,[</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">self</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #1d8da4">class</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">]);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(216, 73, 105);"><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures">NSParameterAssert</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">(</span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures; color: #cdbb95">);</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">return</span><span style="font-variant-ligatures: no-common-ligatures"> </span><span style="font-variant-ligatures: no-common-ligatures; color: #e03b4b">nil</span><span style="font-variant-ligatures: no-common-ligatures">;</span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">&nbsp; &nbsp; }</span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);">










































</p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures">}</span></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b><br></b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><b><br></b></p><p style="margin: 0px; font-size: 11px; line-height: normal; font-family: Menlo; color: rgb(213, 207, 171);"><br></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);"><span style="font-variant-ligatures: no-common-ligatures"><br></span></p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);">用单例设计存储数据接口</p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);">用单例接口隔离实现细节</p><p style="margin: 0px; line-height: normal; font-family: Menlo; color: rgb(205, 187, 149);">在单例提供接口的基础上进行上层封装</p></div></div></div></div>
  <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = 'Untitled Note.html';
if (e.keyCode === 37) window.location.href = 'FFMpeg.html';
}</script>
</body>
</html>